# Vue 源码

## 1 [239~](https://www.processon.com/mindmap/63ac109f6592974cd49ff115)

### 1.1 源码逻辑.effect.[example/5.effect.html](../../public/example/1.vue3.base/example/5.effect.html)

```html
<script type="module">
  import { reactive, effect } from './vue.runtime.esm-bundler.js'
  // 1. 已经是 effect 函数，再被 effect
  let reactiveEffect = effect(() => {
    console.log(1)
  })
  // debugger
  let reactiveEffect2 = effect(reactiveEffect)
  console.log(reactiveEffect === reactiveEffect2) // false
</script>
```

### 1.2 源码逻辑.effect.[example/5.effect.html](../../public/example/1.vue3.base/example/5.effect.html)

```html
<script type="module">
  import { reactive, effect, ref } from './vue.runtime.esm-bundler.js'
  const state = reactive({ name: 'jw' })
  // 2）effect 死循环问题，儿子effect调用父亲effect；
  /*
      const state = reactive({ a: 1 })
      effect(function () {
        // e0
        console.log(state.a)
        effect(() => {
          // e1
          console.log(1)
          effect(() => {
            // e2
            console.log(2)
            state.a = Math.random()
            // debugger
            // this.run() // e2 -> e0；进入死循环
          })
        })
      })
      */

  // 3）调试 track 和 effect
  /*
      effect(() => {
        state.name
      })
      debugger
      state.name = 'jiang'
      */

  // 4）调试 scheduler 函数
  /*
      effect(
        () => {
          state.name
        },
        {
          scheduler: (effect) => {
            console.log('更新')
          },
        }
      )
      debugger
      state.name = 'jiang'
      */

  // 5）clean 清理操作
  effect(() => {
    console.log('rerender')
    if (state.name === 'jw') {
      console.log(state.age)
    }
  })
  state.age = 100 // 更新
  state.name = 'jiang' // 不要更新
  state.age = 200 // 不更新，位运算，不是全部清理，采用位运算来计算
</script>
```

### 1.3 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 1.4 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 1.5 [xx](../../public/example/1.vue3.base/xx)

```js

```

## 2

### 2.1 [xx](../../public/example/1.vue3.base/xx)

```ts

```

### 2.2 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 2.3 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 2.4 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 2.5 [xx](../../public/example/1.vue3.base/xx)

```js

```

## 3

### 3.1 [xx](../../public/example/1.vue3.base/xx)

```ts

```

### 3.2 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 3.3 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 3.4 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 3.5 [xx](../../public/example/1.vue3.base/xx)

```js

```

## 4

### 4.1 [xx](../../public/example/1.vue3.base/xx)

```ts

```

### 4.2 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 4.3 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 4.4 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 4.5 [xx](../../public/example/1.vue3.base/xx)

```js

```

## 5

### 5.1 [xx](../../public/example/1.vue3.base/xx)

```ts

```

### 5.2 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 5.3 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 5.4 [xx](../../public/example/1.vue3.base/xx)

```js

```

### 5.5 [xx](../../public/example/1.vue3.base/xx)

```js

```
